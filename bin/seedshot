#!/usr/bin/env node
var spawn = require("child_process").exec
var platform = require('os').platform()

if (/darwin/.test(platform)){
  spawn("screencapture -i screenshot.jpg && " +
        "open $(node -pe '\"http://seedshot.io/\" " +
        "+ JSON.parse(process.argv[1]).uuid' " + 
        "$(curl -F 'file=@screenshot.jpg' http://seedshot.io)) " +
        "&& rm screenshot.jpg")
} else {
  spawn("screencapture -i screenshot.jpg && " +
        "xdg-open $(node -pe '\"http://seedshot.io/\" " +
        "+ JSON.parse(process.argv[1]).uuid' " + 
        "$(curl -F 'file=@screenshot.jpg' http://seedshot.io)) " +
        "&& rm screenshot.jpg")
}
